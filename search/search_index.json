{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"DS413-final-project documentation!","text":""},{"location":"#description","title":"Description","text":"<p>Final Project for DS413</p>"},{"location":"#commands","title":"Commands","text":"<p>The Makefile contains the central entry points for common tasks related to this project.</p>"},{"location":"getting-started/","title":"Getting started","text":"<p>This is where you describe how to get set up on a clean install, including the commands necessary to get the raw data (using the <code>sync_data_from_s3</code> command, for example), and then how to make the cleaned, final data sets.</p>"},{"location":"data/storage/","title":"Storage","text":"<p>               Bases: <code>Storage</code></p> Source code in <code>lib/data/storage/huggingface.py</code> <pre><code>def __init__(self, token: Union[str, None] = os.getenv(\"HF_TOKEN\")) -&gt; None:\n    super().__init__()\n    self.token = token\n    self.api = HfApi(token=token)\n</code></pre>"},{"location":"data/storage/#lib.data.storage.HuggingFace.load","title":"<code>load(repo_id, filename, save_dir=Directories.EXTERNAL_DATA_DIR.value / 'huggingface')</code>","text":"<p>Download a file from a Hugging Face dataset repository and save it into a local directory.</p> <p>This method uses the instance's <code>api.hf_hub_download</code> to fetch <code>filename</code> from the dataset repository identified by <code>repo_id</code> (repo_type=\"dataset\"). The downloaded file is copied into <code>save_dir</code> (created if necessary) using <code>copy_file_to_directory</code> with mode \"hardlink\", and then renamed to <code>filename</code> inside <code>save_dir</code>. The returned Path points to the saved file.</p> <p>Args:     repo_id (str): The identifier of the Hugging Face dataset repository (e.g. \"owner/dataset\").     filename (str): The name of the file to download from the dataset repo.     save_dir (Union[Path, str], optional): Destination directory to store the downloaded file.         Defaults to Directories.EXTERNAL_DATA_DIR.value / \"huggingface\". Can be a Path or a string.</p> <p>Returns:     Path: Absolute Path to the saved file in <code>save_dir</code> (i.e. save_dir / filename).</p> <p>Raises:     Exception: If the downloaded file does not exist after <code>hf_hub_download</code>.     Any exception raised by <code>self.api.hf_hub_download</code>, <code>self.resolve_path</code>, <code>Path.mkdir</code>,     <code>copy_file_to_directory</code>, <code>Path.rename</code>, or underlying OS calls may propagate (e.g. OSError,     PermissionError). Note that behavior of <code>Path.rename</code> regarding overwriting an existing     target file can be platform-dependent.</p> <p>Side effects:     - Creates <code>save_dir</code> if it does not exist.     - Attempts to create a hard link to the downloaded file in <code>save_dir</code> (via       <code>copy_file_to_directory</code> with mode \"hardlink\"). If hardlinking is not possible,       the implementation of <code>copy_file_to_directory</code> may fall back to copying.     - Renames the stored file to <code>filename</code> inside <code>save_dir</code>.</p> <p>Example:     &gt;&gt;&gt; storage.load(\"owner/dataset\", \"data.csv\")     PosixPath(\"/abs/path/to/external_data/huggingface/data.csv\")</p> Source code in <code>lib/data/storage/huggingface.py</code> <pre><code>def load(\n    self,\n    repo_id: str,\n    filename: str,\n    save_dir: Union[Path, str] = Directories.EXTERNAL_DATA_DIR.value / \"huggingface\",\n) -&gt; Path:\n    \"\"\"\n    Download a file from a Hugging Face dataset repository and save it into a local directory.\n\n    This method uses the instance's `api.hf_hub_download` to fetch `filename` from the dataset\n    repository identified by `repo_id` (repo_type=\"dataset\"). The downloaded file is copied\n    into `save_dir` (created if necessary) using `copy_file_to_directory` with mode \"hardlink\",\n    and then renamed to `filename` inside `save_dir`. The returned Path points to the saved file.\n\n    Args:\n        repo_id (str): The identifier of the Hugging Face dataset repository (e.g. \"owner/dataset\").\n        filename (str): The name of the file to download from the dataset repo.\n        save_dir (Union[Path, str], optional): Destination directory to store the downloaded file.\n            Defaults to Directories.EXTERNAL_DATA_DIR.value / \"huggingface\". Can be a Path or a string.\n\n    Returns:\n        Path: Absolute Path to the saved file in `save_dir` (i.e. save_dir / filename).\n\n    Raises:\n        Exception: If the downloaded file does not exist after `hf_hub_download`.\n        Any exception raised by `self.api.hf_hub_download`, `self.resolve_path`, `Path.mkdir`,\n        `copy_file_to_directory`, `Path.rename`, or underlying OS calls may propagate (e.g. OSError,\n        PermissionError). Note that behavior of `Path.rename` regarding overwriting an existing\n        target file can be platform-dependent.\n\n    Side effects:\n        - Creates `save_dir` if it does not exist.\n        - Attempts to create a hard link to the downloaded file in `save_dir` (via\n          `copy_file_to_directory` with mode \"hardlink\"). If hardlinking is not possible,\n          the implementation of `copy_file_to_directory` may fall back to copying.\n        - Renames the stored file to `filename` inside `save_dir`.\n\n    Example:\n        &gt;&gt;&gt; storage.load(\"owner/dataset\", \"data.csv\")\n        PosixPath(\"/abs/path/to/external_data/huggingface/data.csv\")\n    \"\"\"\n    logger.debug(f\"Downloading file {filename} from repo {repo_id}\")\n    downloaded_file = Path(\n        self.api.hf_hub_download(\n            repo_id=repo_id,\n            repo_type=\"dataset\",\n            filename=filename,\n        )\n    ).resolve()\n\n    logger.debug(f\"Downloaded file path: {downloaded_file}\")\n\n    if not downloaded_file.exists():\n        raise Exception(f\"Failed to download file {filename} from repo {repo_id}.\")\n\n    save_dir = self.resolve_path(save_dir)\n    save_dir.mkdir(parents=True, exist_ok=True)\n\n    saved_file = self.copy_file_to_directory(\n        source_file=downloaded_file,\n        target_directory=save_dir,\n        mode=\"hardlink\",\n    )\n    new_name = save_dir / filename\n\n    if new_name.exists():\n        new_name.unlink()\n        logger.debug(f\"Existing file {new_name} deleted before renaming.\")\n\n    logger.debug(f\"Renaming saved file {saved_file} to {new_name}\")\n\n    saved_file.rename(new_name)\n    return new_name\n</code></pre>"},{"location":"data/storage/#lib.data.storage.HuggingFace.save","title":"<code>save(data, repo_id)</code>","text":"<p>Save data to a Hugging Face repository.</p> <p>This method accepts either a Polars DataFrame or a file path (as a pathlib.Path or string) and delegates the actual saving work to an appropriate helper: - _save_dataframe for DataFrame objects - _save_file for file path inputs</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataFrame | Path | str</code> <p>The data to save. If a Polars DataFrame is provided, it will be serialized and uploaded via the DataFrame-saving routine. If a Path or string is provided, it is treated as a filesystem path to a file that will be uploaded.</p> required <code>repo_id</code> <code>str</code> <p>The identifier of the Hugging Face repository (for example \"username/repo\") where the data should be stored.</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if the save/upload operation completed successfully, False otherwise. The exact semantics of success/failure are determined by the underlying helper methods.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If <code>data</code> is not a Polars DataFrame, pathlib.Path, or string.</p> <code>Exception</code> <p>Any exceptions raised by the underlying helpers (_save_dataframe, _save_file) or the Hugging Face client/library may propagate through; callers should handle network and I/O related errors as appropriate.</p> Notes <ul> <li>This method is a thin dispatcher and does not perform content-specific   validation beyond type checking.</li> <li>Ensure authentication and network connectivity are configured for uploads   to the specified Hugging Face repository.</li> </ul> Example Source code in <code>lib/data/storage/huggingface.py</code> <pre><code>def save(self, data: Union[DataFrame, Path, str], repo_id: str) -&gt; bool:\n    \"\"\"\n    Save data to a Hugging Face repository.\n\n    This method accepts either a Polars DataFrame or a file path (as a pathlib.Path or string)\n    and delegates the actual saving work to an appropriate helper:\n    - _save_dataframe for DataFrame objects\n    - _save_file for file path inputs\n\n    Parameters\n    ----------\n    data : polars.DataFrame | pathlib.Path | str\n        The data to save. If a Polars DataFrame is provided, it will be serialized\n        and uploaded via the DataFrame-saving routine. If a Path or string is\n        provided, it is treated as a filesystem path to a file that will be uploaded.\n    repo_id : str\n        The identifier of the Hugging Face repository (for example \"username/repo\")\n        where the data should be stored.\n\n    Returns\n    -------\n    bool\n        True if the save/upload operation completed successfully, False otherwise.\n        The exact semantics of success/failure are determined by the underlying\n        helper methods.\n\n    Raises\n    ------\n    ValueError\n        If `data` is not a Polars DataFrame, pathlib.Path, or string.\n    Exception\n        Any exceptions raised by the underlying helpers (_save_dataframe, _save_file)\n        or the Hugging Face client/library may propagate through; callers should\n        handle network and I/O related errors as appropriate.\n\n    Notes\n    -----\n    - This method is a thin dispatcher and does not perform content-specific\n      validation beyond type checking.\n    - Ensure authentication and network connectivity are configured for uploads\n      to the specified Hugging Face repository.\n\n    Example\n    -------\n    &gt;&gt;&gt; # Save a DataFrame\n    &gt;&gt;&gt; df = pl.DataFrame({\"a\": [1, 2, 3]})\n    &gt;&gt;&gt; client.save(df, \"myuser/myrepo\")\n    &gt;&gt;&gt; # Save a local file\n    &gt;&gt;&gt; client.save(\"/path/to/file.csv\", \"myuser/myrepo\")\n    \"\"\"\n    logger.debug(f\"Input data type for saving: {type(data)}\")\n    if isinstance(data, (Path, str)):\n        return self._save_file(data, repo_id)\n\n    if isinstance(data, DataFrame):\n        return self._save_dataframe(data, repo_id)\n\n    raise ValueError(\"Data must be either a Polars DataFrame or a file path.\")\n</code></pre>"},{"location":"data/storage/#lib.data.storage.HuggingFace.save--save-a-dataframe","title":"Save a DataFrame","text":"<p>df = pl.DataFrame({\"a\": [1, 2, 3]}) client.save(df, \"myuser/myrepo\")</p>"},{"location":"data/storage/#lib.data.storage.HuggingFace.save--save-a-local-file","title":"Save a local file","text":"<p>client.save(\"/path/to/file.csv\", \"myuser/myrepo\")</p>"}]}